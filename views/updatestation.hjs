<!DOCTYPE html>
<html>
  <head>
    <title>Update Station</title>
    <link rel="stylesheet" href="/styles/bootstrap.min.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
    <script>
      $(document).ready(function() {
        const sessionToken = document.cookie.includes('session_token');
        if (!sessionToken) {
          location.href = '/';
        }

        $('#updatestationForm').submit(function(e) {
          e.preventDefault();
          const form = $(this);
          const url = form.attr('action');
          const formData = form.serialize();
          const stationId = url.split('/').pop(); // Extract stationId from the URL

          $.ajax({
            type: 'PUT',
            url: '/api/v1/station/'+{{stationId}},
            data: formData,
            success: function(response) {
              alert("You have successfully updated the station!");
              form.trigger('reset');
            },
            error: function(error) {
              console.log(error);
              alert("Failed to update station. Please try again.");
            }
          });
        });
      });
    </script> 
    <div>
      <div>
        <nav class="navbar navbar-inverse" style="padding-left:130px;">
          <ul class="nav navbar-nav">
            <li><a href="/dashboard">Home</a></li>
            <li><a href="/stations_example">Stations</a></li>
            <li class="active"><a href="/updatestation">Update Station</a></li>
            {{!-- <li><a href="/updatestations">Update Stations</a></li> --}}
          </ul>
        </nav>  
      </div>
      <br />
      <div class="container">
        <h2>Update Station</h2>
        <form id="updatestationForm" action="/api/v1/station/:stationId" method="PUT">
          <div class="form-group">
            <label for="name">New Station Name:</label>
            <input type="text" class="form-control" id="stationname" name="stationname" placeholder="Enter new station name" required>
          </div>
          <button type="submit" class="btn btn-primary">Update</button>
        </form>
      </div>
    </div>
  </body>
</html>

