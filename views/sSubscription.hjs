<!DOCTYPE html>
<html>
  <head>
    <title>Subscription</title>
    <link rel="stylesheet" href="/styles/bootstrap.min.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h2>Subscription</h2>
      <form id="subscriptionForm" action="/api/v1/tickets/purchase/subscription" method="POST">
        <div class="form-group">
          <label for="subid">Subscription ID:</label>
          <input type="text" class="form-control" id="subid" name="subid" required>
        </div>
        <div class="form-group">
          <label for="origin">Origin:</label>
          <input type="text" class="form-control" id="origin" name="origin" required>
        </div>
        <div class="form-group">
          <label for="destination">Destination:</label>
          <input type="text" class="form-control" id="destination" name="destination" required>
        </div>
        <div class="form-group">
          <label for="tripdate">Trip Date:</label>
          <input type="text" class="form-control" id="tripdate" name="tripdate" required>
        </div>
        <button id="purchaseBtn" type="submit" class="btn btn-primary">Purchase Subscription</button>
      </form>
    </div>

    <script>
      $(document).ready(function() {
        $('#subscriptionForm').submit(function(e) {
          e.preventDefault();
          const form = $(this);
          const url = form.attr('action');
          const formData = form.serialize();

          $.ajax({
            type: 'POST',
            url: '/api/v1/tickets/purchase/subscription',
            data: formData,
            success: function(response) {
              alert("Ticket purchased successfully!");
              form.trigger('reset');
            },
            error: function(error) {
              console.log(error);
              alert("Failed to purchase the ticket. Please try again.");
            }
          });
        });
      });
    </script>
  </body>
</html>
