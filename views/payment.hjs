<!DOCTYPE html>
<html>
  <head>
    <title>Payment</title>
    <link rel="stylesheet" href="/styles/bootstrap.min.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="container">
      <h2>Payment</h2>
      <form id="paymentForm" action="/api/v1/payment/ticket" method="POST">
        <div class="form-group">
          <label for="creditCardNumber">Credit Card Number:</label>
          <input type="text" class="form-control" id="creditCardNumber" name="creditCardNumber" required>
        </div>
        <div class="form-group">
          <label for="holderName">Holder Name:</label>
          <input type="text" class="form-control" id="holderName" name="holderName" required>
        </div>
        <div class="form-group">
          <label for="payedAmount">Paid Amount:</label>
          <input type="number" class="form-control" id="payedAmount" name="payedAmount" required>
        </div>
        <div class="form-group">
          <label for="origin">Origin:</label>
          <input type="text" class="form-control" id="origin" name="origin" required>
        </div>
        <div class="form-group">
          <label for="destination">Destination:</label>
          <input type="text" class="form-control" id="destination" name="destination" required>
        </div>
        <div class="form-group">
          <label for="tripDate">Trip Date:</label>
          <input type="date" class="form-control" id="tripDate" name="tripDate" required>
        </div>
        <button type="submit" class="btn btn-primary">Submit Payment</button>
      </form>
    </div>

    <script>
      $(document).ready(function() {
        $('#paymentForm').submit(function(e) {
          e.preventDefault();
          const form = $(this);
          const url = form.attr('action');
          const formData = form.serialize();

          $.ajax({
            type: 'POST',
            url: url,
            data: formData,
            success: function(response) {
              alert("Ticket purchased successfully!");
              form.trigger('reset');
            },
            error: function(error) {
              console.log(error);
              alert("Failed to purchase the ticket. Please try again.");
            }
          });
        });
      });
    </script>
  </body>
</html>
