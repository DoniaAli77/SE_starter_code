<!DOCTYPE html>
<html>
  <head>
    <title>Check Price</title>
    <link rel='stylesheet' href='/styles/bootstrap.min.css' />
    <link rel='stylesheet' href='/styles/style.css' />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
    <script>
      $(document).ready(function() {
        function fetchStations() {
          $.ajax({
            type: "GET",
            url: "/api/v1/stations",
            success: function(data) {
              if (data) {
                data.sort((a, b) => a.id - b.id);
              }
            },
            error: function(err) {
              console.log("error message", err.responseText);
            }
          });
        }

        // Button Click
        $("#check").click(function() {
          const origin = $('#origin').val();
          const destination = $('#destination').val();
          
          console.log(origin);
          console.log(destination);

          if (origin && destination) {
            $.ajax({
              type: 'GET',
              url: `/api/v1/tickets/price/${origin}&${destination}`,
              success: function(data) {
                if (data) {
                  $("#ticketPrice").text(data.ticketPrice);
                  console.log(data.ticketPrice)
                }
              },
              error: function(err) {
                console.log("error message", err.responseText);
              }
            });
          }
        });
      });
    </script>

    <div>
      <nav class="navbar navbar-inverse" style="padding-left:130px;">
        <ul class="nav navbar-nav">
          <li><a href="/">Home</a></li>
        </ul>
      </nav>
    </div>

    <div class="left">
      <h3>Check Price</h3>
    </div>
    <div style="padding-left: 200px">
      <form class="form-horizontal" style="width: 50%;">
        <div class="form-group">
          <label for="origin" class="col-sm-2 control-label">Origin</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="origin" name="origin" placeholder="Choose origin" value="">
          </div>
        </div>
        <div class="form-group">
          <label for="destination" class="col-sm-2 control-label">Destination</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="destination" name="destination" placeholder="Choose destination" value="">
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-10 col-sm-offset-2">
            <input id="check" name="check" type="button" value="Check" class="btn btn-primary">
          </div>
        </div>
      </form>
      <label id="ticketPrice"></label>
    </div>
  </body>
</html>
